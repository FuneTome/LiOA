#include <iostream>
using namespace std;

struct node {
	int n;
	node* next;
	node(int _n) : n(_n), next(nullptr){}
};

struct list{
	node* first;
	node* last;
	list() : first(nullptr), last(nullptr){}

	bool is_empty() { return first == nullptr; }
	void add(int _n) {
		node* p = new node(_n);
		if (is_empty()) {
			first = p;
			last = p;
			return;
		}
		node* t1 = first;
		node* t2 = first->next;
		if (first->n > _n) {
			p->next = first;
			first = p;
			return;
		}
		while (t2 && t2->n < _n) {
			t2 = t2->next;
			t1 = t1->next;
		}
		t1->next = p;
		p->next = t2;
	}
	void print() {
		if (is_empty()) return;
		node* p = first;
		while (p) {
			cout << p->n << " ";
			p = p->next;
		}
		cout << "\n";
	}
	void dlt_first(){
		if (is_empty()) return;
		node* p = first;
		first = p->next;
		delete p;
	}
	void dlt_last(){
		if (is_empty()) return;
		node* p = first;
		while (p->next != last) p = p -> next;
		p->next = nullptr;
		delete last;
		last = p;
	}
	void dlt(int _n){
		if (is_empty()) return;
		if (first->n == _n) {
			dlt_first();
			return;
		}
		else if (last->n == _n) {
			dlt_last();
			return;
		}
		node* t1 = first;
		node* t2 = first->next;
		while (t2 && t2->n != _n) {
			t2 = t2->next;
			t1 = t1->next;
		}
		if (!t2) {
			cout << "Элемент не был найден." << endl;
			return;
		}
		t1->next = t2->next;
		delete t2;
	}
};



int main() {
	setlocale(LC_ALL, "");
	list l;
	int r;
	cout << "1. Добавить элемент \n2. Вывести список \n3. Удалить элемент \n4. Выход\n";
	while (1) {
		cout << "Выберите пункт : ";
		cin >> r;
		switch(r){
		case 1: {
			int n;
			cout << "Введите значение: ";
			cin >> n;
			l.add(n);
		}continue;
		case 2: {
			l.print();
		}continue;
		case 3: {
			int z;
			cout << "Введите значение узла который нужно удалить: ";
			cin >> z;
			l.dlt(z);
		}continue;
		case 4: { exit(0); };
		}
	}
	return 0;
}